# üî¢ BitArray

–ú–∞—Å—Å–∏–≤ –±–∏—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –±—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. üöÄ

---

## üî• –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### ‚ö° –ú–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å `O(1)`, –µ—Å–ª–∏ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ.


- `AllTrue()` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å–µ –ª–∏ –±–∏—Ç—ã —Ä–∞–≤–Ω—ã `true`.
- `HasTrue()` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –±–∏—Ç `true`.
- `TrueCount()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç–æ–≤, —Ä–∞–≤–Ω—ã—Ö `true`.
- `Flip(unsigned long long index)` ‚Äî –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –±–∏—Ç –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É.
- `Flip()` ‚Äî –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –±–∏—Ç—ã.
- `Set(unsigned long long index, bool value)` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –±–∏—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É.
- `Set(bool value)` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –±–∏—Ç–æ–≤. –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–∞—è: `O(n)`.
- `Size()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç–æ–≤.
- `IsTrue(unsigned long long index)` ‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±–∏—Ç–∞.
- `ToString()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ (`0`/`1`). –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–∞—è: `O(n)`.
- `ToNumber()` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∞—Å—Å–∏–≤ –±–∏—Ç–æ–≤ –≤ —á–∏—Å–ª–æ (–æ–¥–∏–Ω –±–∏—Ç - –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞). –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–∞—è: `O(n)`.


---

## üõ†Ô∏è –û–ø–µ—Ä–∞—Ç–æ—Ä—ã

- `[]` ‚Äî –¥–æ—Å—Ç—É–ø –∫ –±–∏—Ç—É –ø–æ –∏–Ω–¥–µ–∫—Å—É (—á—Ç–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ `BitReference`). –í —ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- `bool()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –±–∏—Ç `true` (–∞–Ω–∞–ª–æ–≥ `HasTrue()`).
- `<<` ‚Äî –≤—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `ToString()`.

---

## üéØ –ü—Ä–∏–º–µ—Ä

```c++
#include "cs/types.h"

int main() {
    BitArray bits = {false, true, true, false, false}; // 01100
    bits.Set(true); // 11111
    bits[3] = false; // 11101
    bits.Flip(); // 00010
    std::cout << bits << std::endl; // 00010
    std::cout << bits.TrueCount() << std::endl; // 1
    return 0;
}
```

### üîó –†–∞–±–æ—Ç–∞ —Å `BitReference`

–û–ø–µ—Ä–∞—Ç–æ—Ä `[]` –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `BitReference`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∏–∑–º–µ–Ω—è—Ç—å –±–∏—Ç. –î–ª—è —á—Ç–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `operator[] const`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `bool`.

#### ‚ùì –ü–æ—á–µ–º—É `BitReference`?

–í C++ `operator[]` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç, –Ω–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∏—Ç –≤ `unsigned long long` –Ω–µ–ª—å–∑—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å—Å—ã–ª–∫—É. –†–µ—à–µ–Ω–∏–µ ‚Äî `BitReference`, –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- –•—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å–ª–æ–≤–æ –∏ —Å–º–µ—â–µ–Ω–∏–µ –±–∏—Ç–∞.
- –ü–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç `operator=` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏—Ç–∞.
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ `bool`.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∏—Ç–∞–º–∏, –æ–±—Ö–æ–¥—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —è–∑—ã–∫–∞.

```c++
BitArray bits(4);    // 0000
bits[2] = true;      // 0010
std::cout << bits[2]; // 1
```
```c++
#include "cs/types.h"

int main() {
    BitArray bits(4); // 0000
    bits[2] = true; // 0010
    std::cout << bits[2] << std::endl; // 1
    bits.Flip(2); // 0000
    std::cout << bits << std::endl; // 0000
    return 0;
}
```

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ë–∏—Ç—ã —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –º–∞—Å—Å–∏–≤ `unsigned long long` (–ø–æ 64 –±–∏—Ç–∞ –Ω–∞ —Å–ª–æ–≤–æ), —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏.
- **–ì–∏–±–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è**: –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `[]` –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏.
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–¥—Å—á—ë—Ç `TrueCount` –∫—ç—à–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –ø—Ä–æ—Ö–æ–¥–æ–≤ –ø–æ –º–∞—Å—Å–∏–≤—É.
- **–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –≤—ã–≤–æ–¥–∞**: –ß–µ—Ä–µ–∑ `<<` –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ `0` –∏ `1`.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: `BitReference` –Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∏—Ç–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Set` –∏–ª–∏ `Flip`.

--- 

## üõ†Ô∏è –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–µ—Ç–∞–ª–∏

- **_numbers**: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `List<unsigned long long>` —Ö—Ä–∞–Ω–∏—Ç –±–∏—Ç—ã, —Ä–∞–∑–±–∏—Ç—ã–µ –Ω–∞ 64-–±–∏—Ç–Ω—ã–µ —Å–ª–æ–≤–∞.
- **_word_size**: –†–∞–∑–º–µ—Ä —Å–ª–æ–≤–∞ (64 –±–∏—Ç–∞).
- **_bit_offset(pos)**: –í—ã—á–∏—Å–ª—è–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ –±–∏—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤–∞.
- **_word_index(pos)**: –í—ã—á–∏—Å–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å —Å–ª–æ–≤–∞ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏.
- **_isReversed**: –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–Ω–≤–µ—Ä—Å–∏–∏ (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –≤—Å–µ –±–∏—Ç—ã).
